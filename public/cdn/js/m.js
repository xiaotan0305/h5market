define("eleAnimation",["snabbt"],function(a){var e=a("snabbt"),t=(seajs.data.vars,{getAnimations:function(a,e){var t,n=parseInt(a.element.height()?a.element.height():200),s=parseInt(a.element.width()?a.element.width():200);switch(e.show){case"zoomIn":t=[{fromScale:[.8,.8],scale:[1,1],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"zoomInDown":t=[{fromScale:[.5,.5],scale:[1,1],fromPosition:[0,-500,0],position:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:.7*e.speed}];break;case"expandOpen":t=[{fromScale:[1.8,1.8],scale:[.95,.95],easing:"ease",duration:parseInt(.6*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.4*e.speed)}];break;case"fadeIn":t=[{fromScale:[.5,.5],scale:[1,1],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:parseInt(.6*e.speed)},{scale:[.9,.9],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"fadeInNormal":t=[{fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"fadeInUp":t=[{fromPosition:[0,n,0],position:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"fadeInDown":t=[{fromPosition:[0,-n,0],position:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"fadeInRight":t=[{fromPosition:[s,0,0],position:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"fadeInLeft":t=[{fromPosition:[-s,0,0],position:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"moveUp":t=[{fromPosition:[0,n,0],position:[0,0,0],fromOpacity:1,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"moveDown":t=[{fromPosition:[0,-n,0],position:[0,0,0],fromOpacity:1,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"moveRight":t=[{fromPosition:[-s,0,0],position:[0,0,0],fromOpacity:1,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"moveLeft":t=[{fromPosition:[s,0,0],position:[0,0,0],fromOpacity:1,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"rotateIn":t=[{fromRotation:[0,0,Math.PI],rotation:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:e.speed}];break;case"rotateInDownLeft":t=[{fromRotation:[0,0,Math.PI/4],rotation:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"linear",transformOrigin:[-s/2,n/2,0],duration:e.speed}];break;case"rotateInDownRight":t=[{fromRotation:[0,0,-Math.PI/4],rotation:[0,0,0],fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"linear",transformOrigin:[s/2,n/2,0],duration:e.speed}];break;case"flipInY":t=[{fromRotation:[0,Math.PI/2,0],rotation:[0,20*-Math.PI/180,0],fromOpacity:.4,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:parseInt(.7*e.speed)},{fromRotation:[0,20*-Math.PI/180,0],rotation:[0,0,0],easing:"ease",duration:parseInt(.3*e.speed)}];break;case"flipInX":t=[{fromRotation:[Math.PI/2,0,0],rotation:[20*-Math.PI/180,0,0],fromOpacity:.4,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:parseInt(.7*e.speed)},{fromRotation:[20*-Math.PI/180,0,0],rotation:[0,0,0],easing:"ease",duration:parseInt(.3*e.speed)}];break;case"lightSpeedIn":t=[{fromSkew:[0,-Math.PI/6],skew:[0,20*Math.PI/180],fromOpacity:.4,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,fromPosition:[s,0,0],position:[0,0,0],easing:"ease",duration:parseInt(.6*e.speed)},{skew:[0,5*-Math.PI/180],easing:"ease",duration:parseInt(.2*e.speed)},{skew:[0,0],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"slideRight":t=[{fromPosition:[parseInt(-1.5*s),0,0],position:[parseInt(.08*s),0,0],easing:"ease",duration:parseInt(.6*e.speed)},{position:[parseInt(-.04*s),0,0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"slideLeft":t=[{fromPosition:[parseInt(1.5*s),0,0],position:[parseInt(-.08*s),0,0],easing:"ease",duration:parseInt(.6*e.speed)},{position:[parseInt(.04*s),0,0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"slideDown":t=[{fromPosition:[0,parseInt(-1*n),0],position:[0,parseInt(.08*n),0],easing:"ease",duration:parseInt(.6*e.speed)},{position:[0,parseInt(-.04*n),0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"slideUp":t=[{fromPosition:[0,parseInt(n),0],position:[0,parseInt(-.08*n),0],easing:"ease",duration:parseInt(.6*e.speed)},{position:[0,parseInt(.04*n),0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"stretchRight":t=[{fromScale:[.3,1],scale:[1.02,1],easing:"ease",transformOrigin:[-1.2*s,0,0],duration:parseInt(.4*e.speed)},{scale:[.98,1],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1.01,1],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"stretchLeft":t=[{fromScale:[.3,1],scale:[1.02,1],easing:"ease",transformOrigin:[1.2*s,0,0],duration:parseInt(.4*e.speed)},{scale:[.98,1],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1.01,1],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"pullUp":t=[{fromScale:[1,.3],scale:[1,1.02],easing:"ease",transformOrigin:[0,n/2,0],duration:parseInt(.6*e.speed)},{scale:[1,.99],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"pullDown":t=[{fromScale:[1,.3],scale:[1,1.02],easing:"ease",transformOrigin:[0,-n/2,0],duration:parseInt(.6*e.speed)},{scale:[1,.99],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"rotateLeft":t=[{fromRotation:[0,0,0],rotation:[0,0,Math.PI],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}];break;case"rotateRight":t=[{fromRotation:[0,0,0],rotation:[0,0,-Math.PI],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}];break;case"bounceIn":t=[{fromScale:[.5,.5],scale:[1,1],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:0,opacity:1,easing:"ease",duration:parseInt(.6*e.speed)},{scale:[.9,.9],easing:"ease",duration:parseInt(.2*e.speed)},{scale:[1,1],easing:"ease",duration:parseInt(.2*e.speed)}];break;case"wobble":t=[{position:[parseInt(-.25*s),0,0],rotation:[0,5*-Math.PI/180,0],easing:"linear",duration:parseInt(.15*e.speed)},{position:[parseInt(.2*s),0,0],rotation:[0,3*Math.PI/180,0],easing:"linear",duration:parseInt(.15*e.speed)},{position:[parseInt(-.15*s),0,0],rotation:[0,3*-Math.PI/180,0],easing:"linear",duration:parseInt(.15*e.speed)},{position:[parseInt(.1*s),0,0],rotation:[0,2*Math.PI/180,0],easing:"linear",duration:parseInt(.15*e.speed)},{position:[parseInt(-.05*s),0,0],rotation:[0,-Math.PI/180,0],easing:"linear",duration:parseInt(.15*e.speed)},{position:[0,0,0],rotation:[0,0,0],easing:"linear",duration:parseInt(.25*e.speed)}];break;case"swing":t=[{rotation:[0,0,Math.PI*-15/180],transformOrigin:[0,-n,0],easing:"linear",duration:parseInt(.2*e.speed)},{rotation:[0,0,Math.PI*-10/180],transformOrigin:[0,-n,0],easing:"linear",duration:parseInt(.2*e.speed)},{rotation:[0,0,5*Math.PI/180],transformOrigin:[0,-n,0],easing:"linear",duration:parseInt(.2*e.speed)},{rotation:[0,0,Math.PI*-5/180],transformOrigin:[0,-n,0],easing:"linear",duration:parseInt(.2*e.speed)},{rotation:[0,0,0],transformOrigin:[0,-n,0],easing:"linear",duration:parseInt(.2*e.speed)}];break;case"shake":t=[{position:[-10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[-10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[-10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[-10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[-10,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.1*e.speed)}];break;case"jello":t=[{skew:[0,0,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[12.5*-Math.PI/180,12.5*-Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[6.25*Math.PI/180,6.25*Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[3.125*-Math.PI/180,3.125*-Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[1.5625*Math.PI/180,1.5625*Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[.78125*-Math.PI/180,.78125*-Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[.390625*Math.PI/180,.390625*Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[.1953125*-Math.PI/180,.1953125*-Math.PI/180,0],easing:"ease",duration:parseInt(.11*e.speed)},{skew:[0,0,0],easing:"ease",duration:parseInt(.12*e.speed)}];break;case"bounce":t=[{position:[0,0,0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,-120,0],easing:"ease",duration:parseInt(.2*e.speed)},{position:[0,-120,0],easing:"ease",duration:parseInt(.03*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.27*e.speed)},{position:[0,-16,0],easing:"ease",duration:parseInt(.1*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.1*e.speed)}];break;case"flash":t=[{fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.25*e.speed)},{fromOpacity:0,opacity:1,easing:"ease",duration:parseInt(.25*e.speed)},{fromOpacity:1,opacity:0,easing:"ease",duration:parseInt(.25*e.speed)},{fromOpacity:0,opacity:"number"==typeof a.data.opacity?a.data.opacity:1,easing:"ease",duration:parseInt(.25*e.speed)}];break;case"pulse":t=[{fromScale:[1,1],scale:[1.05,1.05],easing:"ease",duration:parseInt(.25*e.speed)},{fromScale:[1.05,1.05],scale:[1,1],easing:"ease",duration:parseInt(.25*e.speed)},{fromScale:[1,1],scale:[1.05,1.05],easing:"ease",duration:parseInt(.25*e.speed)},{fromScale:[1.05,1.05],scale:[1,1],easing:"ease",duration:parseInt(.25*e.speed)}];break;case"rubberBand":t=[{fromScale:[1,1],scale:[1.25,.75],easing:"ease",duration:parseInt(.3*e.speed)},{fromScale:[1.25,.75],scale:[.75,1.25],easing:"ease",duration:parseInt(.1*e.speed)},{fromScale:[.75,1.25],scale:[1.15,.85],easing:"ease",duration:parseInt(.1*e.speed)},{fromScale:[1.15,.85],scale:[.95,1.05],easing:"ease",duration:parseInt(.15*e.speed)},{fromScale:[.95,1.05],scale:[1.05,.95],easing:"ease",duration:parseInt(.1*e.speed)},{fromScale:[1.05,.95],scale:[1,1],easing:"ease",duration:parseInt(.25*e.speed)}];break;case"floating":t=[{position:[0,.4*n,0],easing:"ease",duration:parseInt(.5*e.speed)},{position:[0,0,0],easing:"ease",duration:parseInt(.5*e.speed)}];break;case"fadeOut":t=[{fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}];break;case"zoomFadeOut":t=[{fromScale:[1,1],scale:[1.3,1.3],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)},{fromOpacity:0,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)}];break;case"zoomOut":t=[{fromScale:[1,1],scale:[.3,.3],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)},{fromOpacity:0,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)}];break;case"fadeOutRight":t=[{fromPosition:[0,0,0],position:[s,0,0],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}],console.log(t);break;case"fadeOutLeft":t=[{fromPosition:[0,0,0],position:[-s,0,0],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)}];break;case"fadeOutUp":t=[{fromPosition:[0,0,0],position:[0,-n,0],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}];break;case"fadeOutDown":t=[{fromPosition:[0,0,0],position:[0,n,0],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.5*e.speed)}];break;case"rotateOutUpRight":t=[{fromRotation:[0,0,0],rotation:[0,0,-Math.PI/4],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"linear",transformOrigin:[-s/2,n/2,0],duration:parseInt(.8*e.speed)}];break;case"rotateOutUpLeft":t=[{fromRotation:[0,0,0],rotation:[0,0,Math.PI/4],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"linear",transformOrigin:[-s/2,n/2,0],duration:parseInt(.8*e.speed)}];break;case"hinge":t=[{fromRotation:[0,0,0],rotation:[0,0,80*-Math.PI/180],easing:"easeIn",transformOrigin:[-s/2,-n/2,0],duration:parseInt(.2*e.speed)},{fromRotation:[0,0,80*-Math.PI/180],rotation:[0,0,60*-Math.PI/180],easing:"easeIn",transformOrigin:[-s/2,-n/2,0],duration:parseInt(.2*e.speed)},{fromRotation:[0,0,60*-Math.PI/180],rotation:[0,0,80*-Math.PI/180],easing:"easeIn",transformOrigin:[-s/2,-n/2,0],duration:parseInt(.2*e.speed)},{fromRotation:[0,0,60*-Math.PI/180],rotation:[0,0,80*-Math.PI/180],easing:"easeIn",transformOrigin:[-s/2,-n/2,0],duration:parseInt(.2*e.speed)},{fromPosition:[0,0,0],position:[0,700,0],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"easeIn",transformOrigin:[-s/2,-n/2,0],duration:parseInt(.2*e.speed)}];break;case"rotateOut":t=[{fromRotation:[0,0,0],rotation:[0,0,200*-Math.PI/180],fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:1,opacity:0,easing:"ease",duration:parseInt(.8*e.speed)}];break;default:t=[{fromOpacity:"number"==typeof a.data.opacity?a.data.opacity:0,opacity:1}]}return t},getEffect:function(a){var e={};return a.data.animations?(e.show=a.data.animation.show,e.delay=1e3*a.data.animation.delay,e.speed=1e3*a.data.animation.speed):(e.show=a.data.show,e.delay=1e3*a.data.delay,e.speed=1e3*a.data.speed),e.show||(e=!1),e},getInEffect:function(a){var e={};return a.data.animations?(e.show=a.data.animations.animationIn.show,e.delay=a.data.animations.animationIn.delay,e.speed=a.data.animations.animationIn.speed):(e.show=a.data.show,e.delay=a.data.delay,e.speed=a.data.speed),e.show&&"noeffect"!==e.show||(e=!1),e},getOnEffect:function(a){var e={};return a.data.animations?(e.show=a.data.animations.animationOn.show,e.delay=a.data.animations.animationOn.delay,e.speed=a.data.animations.animationOn.speed,e.loop=a.data.animations.animationOn.frequency):(e.show="",e.delay="",e.speed="",e.loop=""),e.show&&"noeffect"!==e.show||(e=!1),e},getOutEffect:function(a){var e={};return a.data.animations?(e.show=a.data.animations.animationOut.show,e.delay=a.data.animations.animationOut.delay,e.speed=a.data.animations.animationOut.speed):(e.show="",e.delay="",e.speed=""),e.show&&"noeffect"!==e.show||(e=!1),e},actAnimation:function(a){var t={};t["in"]=this.getInEffect(a),t.on=this.getOnEffect(a),t.out=this.getOutEffect(a);var n=a.element[0];a.elementout.hide();var s,o={};if(t["in"]){o["in"]=this.getAnimations(a,t["in"]),o["in"][0].startCallback=function(){a.elementout.show(),"site"===a.eletype&&seajs.emit("showSite")},o["in"][0].delay=t["in"].delay>300?parseInt(t["in"].delay-300):0,s=e(n,o["in"][0]);for(var i=1;i<o["in"].length;i++)s.snabbt(o["in"][i])}if(t.on){o.on=this.getAnimations(a,t.on),o.on[0].delay=t.on.delay>300?parseInt(t.on.delay-300):0;for(var r=t.on.loop?t.on.loop:0;r>0;){for(var p=0;p<o.on.length;p++)s?s.snabbt(o.on[p]):s=e(n,o.on[p]),o.on[p].startCallback=function(){a.elementout.show()};r--}}if(t.out){o.out=this.getAnimations(a,t.out),o.out[0].startCallback=function(){a.elementout.show()},o.out[0].callback=function(){a.elementout.hide()},o.out[0].delay=t.out.delay>300?parseInt(t.out.delay-300):0,s||(s=e(n,o.out[0]));for(var d=1;d<o.out.length;d++)s.snabbt(o.out[d])}a.elementout.show()},stopAnimation:function(a){e(a.element[0],"stop"),a.elementout.hide()}});return t});
define("tools",["jquery","hammer","smsLogin","swiperAni"],function(e){var t=seajs.data.vars,i=e("jquery"),o=e("smsLogin"),a=e("hammer"),n=e("swiperAni");return t.shapesJon={},{scale:function(e,i){return e=parseInt(Math.round(parseInt(e)*(i?t.radio.ratio[i]:t.radio.scaleRatio))),e+"px"},rotate:function(e){return"rotate("+e+"deg)"},imgfilter:function(e){return t.imgUrlReg.test(e)?e:t.imgSite+"imgs/"+e},addpx:function(e){return parseInt(e)+"px"},shadow:function(e){return"0 0 "+this.addpx(e)+" black"},url:function(e){var t;return t=e?/^http(s)?/.test(e)?e:location.protocol+"//"+e:"javascript:void(0);"},isGif:function(e){var t=/\.gif/i;return t.exec(e)},toDou:function(e){return e=parseInt(e),e<10?"0"+e:""+e},getCountDown:function(e,t){var i=(t.deadline_date+" "+t.deadline_time).replace(/-/g,"/");return e.oDate=e.oDate||new Date(i),e.getTime=parseInt((e.oDate.getTime()-(new Date).getTime())/1e3),e.getDay=this.toDou(parseInt(e.getTime/86400)),e.getTime1=e.getTime%86400,e.getHours=this.toDou(parseInt(e.getTime1/3600)),e.getTime1%=3600,e.getMinutes=this.toDou(parseInt(e.getTime1/60)),e.getSeconds=this.toDou(e.getTime1%60),{countDown:e.getDay+":"+e.getHours+":"+e.getMinutes+":"+e.getSeconds,theTime:e.getTime}},render:function(e,o){var a=e.content.data.length;if("bar"===e.content.type||"column"===e.content.type||"line"===e.content.type)switch(e.content.multiple){case 1:if(o.highcharts(this.prepareChartOption(e,0)),o.find("img").remove(),a<=1||a>1&&!e.content.data[1].data)return!1;var n=i("<img/>");n.css({position:"absolute",width:"120px",left:"50%",top:"50%","margin-left":"-60px","margin-top":"-60px","z-index":"99",display:"none"}),n.attr("src",t.imgSite+"imgs/swipewarn.png"),o.append(n),o.find("img").fadeIn(500),setTimeout(function(){o.find("img").fadeOut(500)},2e3);break;default:o.highcharts(this.prepareChartOption(e))}else"pie"===e.content.type&&o.highcharts(this.piePrepareChartOption(e))},normalizeData:function(e){var t=e[0].data,i=[];for(var o in t)t.hasOwnProperty(o)&&i.push({name:t[o][0],y:t[o][1]});return{data:i}},renderPic:function(e){var o,a=this,n=i("<div></div>"),s=i("<div></div>");o=e.borderradius&&e.borderradius>0?null:i("<img/>"),n.css({width:a.scale(e.w),height:a.scale(e.h),left:a.scale(e.left),top:a.scale(e.top,"top"),position:"absolute",opacity:e.opacity,transform:a.rotate(e.rotate)});var r,l,c;e.cropData&&a.isGif(e.picid)?(c="100%",l=0,r=0):(c=a.scale(e.inw),l=a.scale(e.intop),r=a.scale(e.inleft));var p;return p=e.picid?a.imgfilter(e.picid):e.con?e.con:t.imgSite+"imgs/ele/loadingpic.jpg",s.css({position:"absolute",overflow:"hidden","background-clip":"padding-box",width:"100%",height:"100%","border-radius":Math.min(e.borderradius,50)+"%",boxShadow:a.shadow(e.boxshadow)}),e.borderradius&&e.borderradius>0?s.css({"background-image":"url("+p+")","background-repeat":"no-repeat","background-size":c,"background-position":r+" "+l}):(o.css({position:"absolute",width:c,left:r,top:l}),o.attr("src",p),s.append(o)),n.append(s),{eletype:e.type,elementout:n,element:s,data:e,imgSrc:p}},renderText:function(e){var t=this,o=i("<div></div>"),a=i("<div></div>");if(e.version>=21&&a.addClass("no_margin"),o.css({position:"absolute",width:t.scale(e.w),top:t.scale(e.top,"top"),left:t.scale(e.left),height:t.scale(e.height),transform:t.rotate(e.rotate),opacity:e.opacity}),a.css({width:"106%",height:t.scale(e.height),color:e.ftcolor,fontSize:t.scale(e.ftsize),background:e.bgcolor,textAlign:e.textalign,fontWeight:e.fontbold?"bold":"normal",textDecoration:e.udl?"underline":"none",lineHeight:e.lineheight,borderStyle:e["border-style"],borderColor:e["border-color"],borderWidth:t.scale(e["border-width"]),fontStyle:e.fontitalic?"italic":"normal",borderRadius:t.scale(e.borderradius),boxShadow:t.shadow(e.boxshadow),wordWrap:"break-word"}),e.fontFamily&&a.css({"font-family":e.fontFamily}),"text"===e.type){var n;switch(e.textvalign){case"top":n=0;break;case"middle":n=e.h/2-e.tl/2;break;case"bottom":n=e.h-e.tl}a.css({marginTop:t.scale(n),height:"auto"})}if(a.append(e.con),o.append(a),"text"===e.type){var s=a.get(0).firstChild;s&&s.hasChildNodes()&&parseInt(s.style.fontSize)&&(s.style.fontSize=t.scale(parseInt(s.style.fontSize)))}return{eletype:e.type,elementout:o,data:e,element:a}},renderPshape:function(e){var o=this,a=i("<div></div>"),n=i("<div></div>");a.css({position:"absolute",width:o.scale(e.w),height:o.scale(e.h),top:o.scale(e.top),left:o.scale(e.left),transform:o.rotate(e.rotate)}),n.css({position:"absolute",width:o.scale(e.w),height:o.scale(e.h)});var s,r=!1;return e.shape&&"null"!==e.shape&&"0"!==e.shape?"svgDom"===e.shape?(r=!0,s=e.svgDom):s=e.shape.trim().replace(/\//g,"_"):s="1.svg",r||"resolved"!==t.shapesJon[s+"State"]||o.insertSvg([{name:s,data:e,ele:n}],t.shapesJon[s+"File"]),r?o.insertSvg([{data:e,ele:n}],s):t.shapesJon[s+"State"]?"pending"===t.shapesJon[s+"State"]&&t.shapesJon[s].push({name:s,data:e,ele:n}):(i.ajax({url:t.imgSite+"imgs/shape/"+s,type:"GET",dataType:"text",async:!0,success:function(e){t.shapesJon[s+"File"]=e,t.shapesJon[s+"State"]="resolved",o.insertSvg(t.shapesJon[s],e)},error:function(e){t.shapesJon[s+"State"]="failed",console.warn("需要新增的shape文件:",s)}}),t.shapesJon[s+"State"]="pending",t.shapesJon[s]=[],t.shapesJon[s].push({name:s,data:e,ele:n})),a.append(n),{eletype:e.type,elementout:a,data:e,element:n}},insertSvg:function(e,t){for(var i=this,o=e.length-1;o>-1;o--){var a=e[o].data,n=e[o].ele,s=n.html(t).find("svg");s.css({position:"absolute",width:i.scale(a.w),height:i.scale(a.h),opacity:a.opacity}),s.get(0).setAttribute("preserveAspectRatio","none meet"),s.find("[fill]").attr({fill:a.shapecolor}),e.pop()}},renderBtn:function(e){var t=this,o=i("<div></div>"),a=i('<a href="javascript:;"></a>');o.css({position:"absolute",width:t.scale(e.w),height:t.scale(e.height),top:t.scale(e.top),left:t.scale(e.left),transform:t.rotate(e.rotate)}),a.css({position:"absolute",width:"100%",color:e.ftcolor||"#585858",fontSize:t.scale(e.ftsize),lineHeight:e.lineheight,opacity:e.opacity,borderStyle:e["border-style"],borderColor:e["border-color"],borderWidth:t.scale(e["border-width"]),background:e.bgcolor,textAlign:e.textalign,borderRadius:t.scale(e.borderradius),boxShadow:t.shadow(e.boxshadow),textDecoration:"none",wordWrap:"break-word"}),a.append(e.con);var n=a.get(0).firstChild;return n&&n.hasChildNodes()&&parseInt(n.style.fontSize)&&(n.style.fontSize=t.scale(parseInt(n.style.fontSize))),o.append(a),{eletype:e.type,elementout:o,data:e,element:a}},renderRandButton:function(e){var t=this,o=i("<div></div>"),a=i('<a href="javascript:;"></a>');o.css({position:"absolute",width:t.scale(e.w),height:t.scale(e.height),top:t.scale(e.top),left:t.scale(e.left),transform:t.rotate(e.rotate)}),a.css({position:"absolute",width:"100%",color:e.ftcolor||"#585858",fontSize:t.scale(e.ftsize),lineHeight:e.lineheight,opacity:e.opacity,borderStyle:e["border-style"],borderColor:e["border-color"],borderWidth:t.scale(e["border-width"]),background:e.bgcolor,textAlign:e.textalign,borderRadius:t.scale(e.borderradius),boxShadow:t.shadow(e.boxshadow),textDecoration:"none",wordWrap:"break-word"}),e.fontFamily&&a.css({"font-family":e.fontFamily});var n=parseInt(e.maxNum)||0,s=parseInt(e.minNum)||0;s>n&&(n=parseInt(e.minNum)||0,s=parseInt(e.maxNum)||0);var r=Math.ceil(Math.random()*(n-s)+s);a.append(r);var l=a.get(0).firstChild;return l&&l.hasChildNodes()&&parseInt(l.style.fontSize)&&(l.style.fontSize=t.scale(parseInt(l.style.fontSize))),o.append(a),{eletype:e.type,elementout:o,data:e,element:a}},renderPbutton:function(e){var o=this,a=i("<div></div>"),n=i("<a></a>");if(a.css({position:"absolute",height:o.scale(e.tl),top:o.scale(e.top),left:o.scale(e.left),transform:o.rotate(e.rotate),opacity:e.opacity}),"link"===e.model_type||"phone"===e.model_type||"interaction"===e.model_type){n.css({position:"absolute",width:"100%",height:"100%",animationDuration:e.speed+"ms"}),"phone"===e.model_type&&e.phoneNumber&&(e.phoneNumber=e.phoneNumber.replace(/-| /g,"").replace("转",",").replace("，",","));var s=i("<div></div>");s.css({position:"absolute",width:o.scale(e.picwidth),height:o.scale(e.picheight)});var r=i("<div></div>");r.css({position:"absolute",left:o.scale(e.picwidth),width:o.scale(e.width),fontSize:o.scale(e.ftsize),color:e.ftcolor,lineHeight:o.scale(e.lineheight),paddingLeft:"5px"});var l=e.pic_id?e.pic_id.match(/./)[0]:"";t.svgJson=t.svgJson||{};var c=e.button_id;if("interaction"===e.model_type){var p=o.getCookie(t.projectID+"_"+c);p&&(l+="a")}if(l&&!t.svgJson["svg_"+l])i.ajax({url:t.imgSite+"imgs/buttonSvg/"+l+".svg",type:"GET",async:!1,dataType:"text",success:function(a){var n=i(a);n.css({width:o.scale(e.picwidth),height:o.scale(e.picheight)}).find("[fill]").attr({fill:e.ftcolor}),t.svgJson["svg_"+l]=a,s.append(n)}});else{var d=i(t.svgJson["svg_"+l]);d.css({width:o.scale(e.picwidth),height:o.scale(e.picheight)}).find("[fill]").attr({fill:e.ftcolor}),s.append(d)}"link"===e.model_type?n.attr({href:o.url(e.url)}):"phone"===e.model_type&&e.phoneNumber&&n.attr("href","tel:"+e.phoneNumber),r.text(p?p:e.con),n.append(s),n.append(r)}else if("count_down"===e.model_type){n.css({position:"absolute",width:"100%",animationDuration:e.speed+"ms",textAlign:"center",color:e.ftcolor,lineHeight:o.scale(e.lineheight),fontSize:o.scale(e.ftsize)});var h=n.get(0);n.append(o.getCountDown(h,e).countDown),clearInterval(h.timer),h.timer=setInterval(function(){n.html(o.getCountDown(h,e).countDown),o.getCountDown(h,e).theTime<0&&(clearInterval(h.timer),n.html("00:00:00:00"))},1e3)}return a.append(n),n.on("click",{contentico:s,contentText:r},function(a){var n=a.data.contentico,s=a.data.contentText;if("phone"===e.model_type)window.location.href="tel://"+e.phoneNumber;else if("link"===e.model_type&&e.url)window.location.href=o.url(e.url);else if("interaction"===e.model_type){var r=o.getCookie(t.projectID+"_"+c);r||i.ajax({type:"get",url:t.phoneSite,cache:!1,dataType:"json",data:{c:"web",a:"ajaxVote",id:t.projectID,voteId:e.button_id,name:e.projectName},success:function(a){var r;1===a.errcode?l&&!t.svgJson["svg_"+l+"a"]?i.ajax({url:t.imgSite+"imgs/buttonSvg/"+l+"a.svg",type:"GET",dataType:"text",success:function(p){r=i(p),r.css({width:o.scale(e.picwidth),height:o.scale(e.picheight)}).find("[fill]").attr({fill:e.ftcolor}),t.svgJson["svg_"+l+"a"]=p,a.counts&&(o.setCookie(t.projectID+"_"+c,a.counts),n.html(r),s.html(a.counts))}}):(r=i(t.svgJson["svg_"+l+"a"]),r.css({width:o.scale(e.picwidth),height:o.scale(e.picheight)}).find("[fill]").attr({fill:e.ftcolor}),a.counts&&(o.setCookie(t.projectID+"_"+c,a.counts),n.html(r),s.html(a.counts))):console.log(a.errmsg)},error:function(e){console.log("网络错误:",e)}})}}),{eletype:e.type,elementout:a,data:e,element:n}},renderPswiper:function(o,a){var n,s,r,l=this,c=[],p=i('<div class="swiper-container" style="z-index: 0"></div>'),d=i('<div class="swiper-wrapper"></div>'),h=i('<div class="swiper-pagination"></div>');p.css({position:"absolute",width:l.scale(o.width),height:l.scale(o.height),left:l.scale(o.left),top:l.scale(o.top),overflow:"hidden"}),p.append(d),p.append(h),o.data.map(function(e){var a=i("<img/>");a.attr("src",l.imgfilter(e.picid)),n=i('<div class="swiper-slide"></div>'),h.append('<span class="swiper-pagination-bullet"></span>');var p=i("<div></div>");a.css({position:"absolute",width:e.inw?l.scale(e.inw):"",height:e.inh?l.scale(e.inh):"",left:e.inleft?l.scale(e.inleft):"",top:e.intop?l.scale(e.intop):""}),c.push({src:a.attr("src"),w:e.inw?parseInt(l.scale(e.inw)):parseInt(l.scale(o.picWidth)),h:e.inh?parseInt(l.scale(e.inh)):parseInt(l.scale(o.picHeight)),msrc:t.imgSite+"imgs/preloader.gif"}),n.css({width:"100%",height:"100%",overflow:"hidden",background:"#ffffff",lineHeight:"1.5"}),p.css({position:"absolute",overflow:"hidden",width:l.scale(o.picWidth),height:l.scale(o.picHeight)}),p.append(a),n.append(p),e.titleText&&(s=i("<div></div>"),s.css({position:"absolute",width:l.scale(e.titleText.width),left:l.scale(e.titleText.left),top:l.scale(e.titleText.top),fontSize:l.scale(e.titleText.fontsize),lineHeight:e.titleText.lineheight,color:e.titleText.fontcolor}),s.append(e.titleText.con),n.append(s)),e.contentText&&(r=i("<div></div>"),e.contentText.opacity?r.css({position:"absolute",width:"100%",height:"150px",top:l.scale(e.contentText.top),fontSize:l.scale(e.contentText.fontsize),lineHeight:e.contentText.lineheight,color:e.contentText.fontcolor,textAlign:"center",background:"black",opacity:e.contentText.opacity}):r.css({position:"absolute",width:l.scale(e.contentText.width),left:l.scale(e.contentText.left),top:l.scale(e.contentText.top),fontSize:l.scale(e.contentText.fontsize),lineHeight:e.contentText.lineheight,color:e.contentText.fontcolor}),r.append(e.contentText.con),n.append(r)),d.append(n)}),e.async(["photoswipe","photoswipeUI"],function(e,t){var o=i(".pswp")[0],a=0;d.off("click",".swiper-slide"),d.on("click",".swiper-slide",function(){a=i(this).index();var n={history:!1,focus:!1,index:a,showAnimationDuration:0,hideAnimationDuration:0},s=new e(o,t,c,n);s.init()})});var u=new a(p,{pagination:h,paginationClickable:!0,spaceBetween:60,speed:600,longSwipesRatio:.3,loop:!0,observer:!0,observeParents:!0,onTouchStart:function(e){e.update()}});return{elementout:p,swiper:u,wrapper:d,pagination:h,eletype:o.type}},renderPswipers:function(e,t){var o,a=this,s=i('<div class="swiper-container" style="z-index: 0"></div>'),r=i('<div class="swiper-wrapper"></div>'),l="true"===e.animation.auto?e.animation.changeTime:0,c=e.animation.speed?e.animation.speed:.3,p=e.animation.show||"slide",d="",h=/^(slide|fade|cube|coverflow|flip)$/;d=h.test(p)?p:"slide",s.css({position:"absolute",width:a.scale(e.width),height:a.scale(e.height),left:a.scale(e.left),top:a.scale(e.top),overflow:"hidden","z-index":10}),s.append(r),e.data.map(function(t){var n=i("<img/>");n.attr("src",a.imgfilter(t.picid)),o=i('<div class="swiper-slide" ></div>');var s=i("<div></div>");h.test(p)||s.addClass("ani").attr({"swiper-animate-effect":p,"swiper-animate-duration":c+"s","swiper-animate-delay":0}),n.css({position:"absolute",width:t.inw?a.scale(t.inw):"",height:t.inh?a.scale(t.inh):"",left:t.inleft?a.scale(t.inleft):"",top:t.intop?a.scale(t.intop):""}),o.css({width:"100%",height:"100%",overflow:"hidden",lineHeight:"1.5"}),s.css({position:"absolute",overflow:"hidden",width:a.scale(e.picWidth),height:a.scale(e.picHeight)}),s.append(n),o.append(s),r.append(o)});var u={speed:h.test(p)?1e3*c:10,longSwipesRatio:.3,loop:!!h.test(p),autoplay:1e3*l,autoplayDisableOnInteraction:!1,effect:d,observer:!0,observeParents:!0,onInit:function(e){h.test(p)||(n.swiperAnimateCache(e),n.swiperAnimate(e))},onSlideChangeEnd:function(e){h.test(p)||n.swiperAnimate(e)}};return{elementout:s,swiper:null,swiperJson:u,wrapper:r,eletype:e.type,eledata:e.animation}},renderCharts:function(e){var t=this,o=i('<div class="chart-wrapper"></div>'),n=i('<div class="chart"></div>'),s=i('<div class="chart-swipe-legend"></div>'),r=0,l=e.content.data.length,c=e.content.multiple?e.content.multiple:2;switch(e.w=e.w||640,e.h=e.h||("pie"===e.content.type?640:450),o.css({position:"absolute",width:t.scale(e.w),height:t.scale(e.h),left:t.scale(e.left),top:t.scale(e.top),background:"rgba(0,0,0,0)"}),n.css({position:"absolute",width:t.scale(e.w),height:t.scale(e.h),left:"0",top:1===c&&"pie"!==e.content.type?50:0}),s.css({position:"absolute",width:t.scale(e.w),height:t.scale(e.h),left:t.scale(e.left),top:"9px","text-align":"center",background:"rgba(0,0,0,0)"}),setTimeout(function(){t.render(e,n)},1500),c){case 1:if("bar"===e.content.type||"column"===e.content.type||"line"===e.content.type){for(var p=e.content.data,d=0,h=p.length;d<h;d++){var u=i('<span class="swipe-legend-title"></span>');u.css({margin:"7px","font-size":"12px",opacity:"0.3",color:"rgb(152, 152, 152)"}),0===d?u.css({"font-size":"16px",opacity:"1"}):u.css({"font-size":"12px",opacity:"0.3"}),u.html(p[d].name),s.append(u)}o.append(s),s.on("click","span",function(){r=i(this).index(),i(this).css({"font-size":"16px",opacity:"1"}).siblings().css({"font-size":"12px",opacity:"0.3"}),n.highcharts(t.prepareChartOption(e,r))});var f=new a(n[0]);f.on("swipeleft",function(){return!(1===l||l>1&&!e.content.data[1].data)&&(r++,s.find("span").css({"font-size":"12px",opacity:".3"}).eq(r%l).css({"font-size":"16px",opacity:"1"}),void n.highcharts(t.prepareChartOption(e,r%l)))}),f.on("swiperight",function(){return!(1===l||l>1&&!e.content.data[1].data)&&(r%=l,r--,r<0&&(r=l-1),s.find("span").css({"font-size":"12px",opacity:".3"}).eq(r).css({"font-size":"16px",opacity:"1"}),void n.highcharts(t.prepareChartOption(e,r)))})}}return o.append(n),{elementout:o,eletype:e.type,data:e,element:n,chartHeard:s}},prepareChartOption:function(e,t){var i=this,o=e.content,a=e.content.options,n="12px",s=a.lineColor||"gray",r=3===o.multiple?"normal":null,l=void 0===t?o.data:[o.data[t]],c=void 0===t?a.colors:[a.colors[t]],p={chart:{type:o.type,backgroundColor:a.backgroundColor,plotBorderWidth:0,spacingLeft:-5,animation:{duration:300}},title:{text:null},colors:c,credits:{enabled:!1},tooltip:{style:{fontSize:n}},plotOptions:{series:{animation:!0,stacking:r,lineWidth:2},column:{borderColor:"",shadow:!1,stacking:r},line:{dataLabels:{enabled:!0}},bar:{borderWidth:0,stacking:r},area:{stacking:"normal"}},xAxis:{lineColor:s,gridLineColor:s,categories:a.xAxis.categories,tickColor:s,labels:{staggerLines:0,distance:10,style:{paddingTop:"10px",fontSize:n,color:s}}},yAxis:{lineColor:s,gridLineColor:s,max:a.yAxis.max,min:a.yAxis.min,tickPixelInterval:parseInt(i.scale(100)),title:{text:a.yAxis.title.text,style:{color:s},x:5},labels:{style:{fontSize:n,color:s},x:-5}},size:{width:i.scale(e.w-8),height:i.scale(e.h)},series:l,legend:{symbolWidth:12,symbolHeight:12,itemStyle:{fontSize:n}}};return p},piePrepareChartOption:function(e,t){var i=e.content,o=e.content.options,a="12px",n=o.lineColor||"gray",s=void 0===t?this.normalizeData(i.data):this.normalizeData([i.data[t]]),r=o.colors,l={chart:{type:i.type,backgroundColor:o.backgroundColor,animation:{duration:300}},title:{text:null},colors:r,legend:{enabled:!0,useHTML:!0,labelFormatter:function(){return'<div style="font-size: '+a+"; color: "+n+'">'+this.name+"</div>"}},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.y}</b>",style:{fontSize:a}},plotOptions:{pie:{allowPointSelect:!0,dataLabels:{format:"{percentage:.1f}%",distance:-parseInt(e.width)/12,color:"white",style:{fontSize:"12px"}},showInLegend:!0}},series:[s]};return l},renderVideo:function(e){var o=this,a=i("<div></div>"),n=i("<video></video>"),s=i("<img/>"),r=e.picurl?e.picurl:"",l="";l=r?o.imgfilter(r):e.con?e.con:t.imgSite+"imgs/ele/loadingpic.jpg",a.css({width:o.scale(e.w),height:"auto",left:o.scale(e.left),top:o.scale(e.top,"top"),position:"absolute",opacity:e.opacity,transform:o.rotate(e.rotate)}),n.attr({preload:"auto","webkit-playsinline":null,width:o.scale(e.inw),height:o.scale(e.inh),type:"video/mp4",poster:l,src:e.videourl?e.videourl:""}),s.css({position:"absolute",left:"50%",top:"50%",margin:"-50px 0 0 -50px",opacity:"0.7"}),s.attr("src",t.imgSite+"imgs/play.png");var c=n[0];return a.on("click",function(){t.audio&&(t.audio.pause(),t.musicOff.show(),t.musicOn.hide()),c.paused?(s.fadeOut(300),c.play()):(s.fadeIn(300),c.pause())}),n.on("timeupdate",function(){c.currentTime===c.duration&&(c.currentTime=0,s.fadeIn(300))}),a.append(n),a.append(s),{eletype:e.type,elementout:a,playBtn:s,element:n,data:e}},renderForm:function(e){var a=this,n=i("<div></div>"),s=i("<div></div>"),r=i("<img/>"),l=i("<p>提交中...</p>"),c=i("<div>"+e.btn_name+"</div>"),p=[],d=e.qlist?e.qlist:[];n.css({position:"absolute",width:a.scale(e.w),top:a.scale(e.top),left:a.scale(e.left),transform:a.rotate(e.rotate)}),s.css({"z-index":"999",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.9)","text-align":"center",display:"none"}),r.css({"margin-top":"100px"}),r.attr("src",t.imgSite+"imgs/sending.gif"),l.css({margin:"20px auto",width:"80%","text-align":"center",color:"white","font-size":"20px"}),c.css({height:a.scale(80),fontSize:a.scale(30),marginTop:a.scale(20),lineHeight:a.scale(80),background:e.formcolor}),c.addClass("form-submit"),s.append(r),s.append(l);for(var h in d)if(d.hasOwnProperty(h)){var u,f=!1,g=d[h].name,m=[];if(g.indexOf("|")>0&&(m=g.split("|"),f=!0),f){for(var v='<select style="color:#757575;">',w=0,b=m.length;w<b;w++){var x=m[w];v+='<option value="'+x+'">'+x+"</option>"}v+="</select>",u=i(v)}else u=i("<input/>");u.attr({pos:h,name:d[h].id,"data-name":d[h].name,placeholder:d[h].name}),u.css({border:"2px solid "+e.formcolor,height:a.scale(80),marginBottom:a.scale(20),color:"#757575",fontSize:a.scale(30)}),u.attr({type:"text","class":"form-input"}),n.append(u),p.push(u)}var y,S=null,T=null,k=null,I=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/i;if("nameTel"===e.limit){y=i('<input name="100" placeholder="请输入验证码" data-name="验证码" >'),y.css({width:"48%",height:a.scale(80),border:"solid 2px "+e.formcolor,marginBottom:a.scale(20),fontSize:a.scale(30),textIndent:a.scale(10),boxSizing:"border-box",display:"none"});var C=i("<div>获取验证码</div>");C.css({width:"46%",border:"solid 2px "+e.formcolor,height:a.scale(80),lineHeight:a.scale(80),marginBottom:a.scale(20),marginTop:a.scale(30),marginLeft:"5%",fontSize:a.scale(30),boxSizing:"border-box",color:"white",textAlign:"center",background:e.formcolor,display:"none"}),T=n.find("input").eq(1),T.on("input",function(){T.val(T.val().replace(/[^-\d]/g,"")),T.val()?(y.css("display","inline-block"),C.css("display","inline-block")):(y.hide(),C.hide())}),C.on("click",function(){T.val()&&I.test(T.val())?(r.attr("src",t.imgSite+"imgs/sending.gif"),l.html("验证码发送中..."),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),s.show(),setTimeout(function(){s.fadeOut(300)},2e3),o.send(T.val(),function(){i.post(t.phoneSite+"?c=web&a=ajaxSendCodeLog",{referer:document.referer,eventid:t.projectID+"_"+e.formid,mobile:T.val(),city:t.city}),r.attr("src",t.imgSite+"imgs/sendsucess.png"),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("发送成功!"),s.fadeIn(300),setTimeout(function(){s.fadeOut(300)},2e3)},function(e){r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html(e),s.fadeIn(300),setTimeout(function(){s.fadeOut(300)},2e3)})):(r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("手机号为空或格式不正确"),s.show(),setTimeout(function(){s.fadeOut(300,function(){T.focus()})},1e3))}),n.append(y),n.append(C)}return n.append(c),c.on("click",{inputCode:y},function(i){if(e.limit&&"nameTel"===e.limit){if(S=p[0],T=p[1],k=i.data.inputCode,!S.val())return r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("姓名不能为空"),s.fadeIn(300),void setTimeout(function(){s.fadeOut(300,function(){S.focus()})},1e3);if(!T.val()||!I.test(T.val()))return r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("手机号为空或格式不正确"),s.fadeIn(300),void setTimeout(function(){s.fadeOut(300,function(){T.focus()})},1e3);if(!k.val())return r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("验证码不能为空"),s.fadeIn(300),void setTimeout(function(){s.fadeOut(300,function(){k.focus()})},1e3)}else if(e.limit&&"none"===e.limit){for(var n=p.length,c=!0,d=0;d<n;d++)if(p[d].val().trim()){c=!1;break}if(c)return r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),l.html("您输入的内容不能全部为空"),s.fadeIn(300),void setTimeout(function(){s.fadeOut(300)},1e3)}var h={};h.eventid=t.projectID+"_"+e.formid,k&&(h.mobilecode=k.val()),h.limit=e.limit,h.city=t.city,h.couponId=e.couponId?e.couponId.trim():"";for(var u in p)p.hasOwnProperty(u)&&(h[p[u].attr("name")]=p[u].val());r.attr("src",t.imgSite+"imgs/sending.gif"),l.html("提交中..."),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),s.fadeIn(300),T&&k?o.check(T.val(),k.val(),function(){a.formAjax(h,l,r,s,e.sucmsg)},function(e){l.html(e+"<br>"),r.attr("src",""),r.attr("src")?l.css("margin","20px auto"):l.css("margin","200px auto"),s.fadeIn(300),setTimeout(function(){s.fadeOut(300)},1e3)}):a.formAjax(h,l,r,s,e.sucmsg)}),s.on("click",function(){s.hide()}),{eletype:e.type,elementout:n,data:e,warn:s}},formAjax:function(e,o,a,n,s){i.ajax({type:"POST",url:t.phoneSite+"?c=web&a=ajaxSubSignInfo",cache:!1,dataType:"json",data:e,success:function(e){1===parseInt(e.errcode)?(e.errmsg?o.html(s+"<br>恭喜您获得了"+e.errmsg):o.html(s),a.attr("src")?o.css("margin","20px auto"):o.css("margin","200px auto"),a.attr("src",t.imgSite+"imgs/sendsucess.png"),n.fadeIn(300),setTimeout(function(){n.fadeOut(300)},2e3)):(o.html("提交失败!<br>"+e.errmsg),a.attr("src",""),a.attr("src")?o.css("margin","20px auto"):o.css("margin","200px auto"),n.fadeIn(300),setTimeout(function(){n.fadeOut(300)},2e3))},error:function(){o.html("提交失败!<br>"),a.attr("src",""),a.attr("src")?o.css("margin","20px auto"):o.css("margin","200px auto"),n.fadeIn(300),setTimeout(function(){n.fadeOut(300)},1e3)}})},renderSite:function(e,o){var a=this,n=i("<div></div>"),s=i('<iframe frameborder="0"></iframe>');n.css({width:a.scale(e.w),height:a.scale(e.h),margin:0,padding:0,left:a.scale(e.left),top:a.scale(e.top),"-webkit-overflow-scrolling":"touch","overflow-x":"hidden","overflow-y":"auto",position:"absolute",opacity:e.opacity,backgroundColor:"#fff",transform:a.rotate(e.rotate)}),s.css({position:"absolute",width:a.scale(e.w),left:0,top:0,border:"none"});var r=e.url,l=e.moreThanOneScreen;if(r&&r.indexOf(location.protocol+"//")===-1&&(r=location.protocol+"//"+r),r){var c=function(e){"block"===n.css("display")&&(s.attr("src",r),seajs.off("showSite",c))};seajs.on("showSite",c)}if(o&&"yes"===o.pan){var p=i('<div class="fromRightSlow delay2s">上下滑动翻页</div>'),d=i("<div ></div>");p.css({position:"absolute",width:"30px",height:"160px",right:"0",top:parseInt(a.scale(e.h))-200,backgroundColor:"rgba(0,0,0,.6)",color:"#fff",textAlign:"center",writingMode:"lr-tb",lineHeight:"26px",borderRadius:"15px",paddingTop:"26px"}),d.css({position:"absolute",width:"100%",height:"26px",top:"0",left:"0",background:'url("'+t.imgSite+'/imgs/banner.png") 0 0 no-repeat',backgroundPosition:"10px 4px"}),p.append(d)}if(t.UA.indexOf("iphone")!==-1){if(s.attr("scrolling","no"),o&&"yes"===o.pan){var h=null,u=parseInt(p.css("top"));n.on("scroll",function(){clearTimeout(h),p.css("top",u+n.scrollTop())})}if("off"===l||t.img360Reg.test(r)){var f=i(window).height();s.css("height",f),n.css("height",f)}}else s.css("height",a.scale(e.h));return o&&"yes"===o.pan&&d.on("click",function(){p.hasClass("fromRightSlow")?(p.removeClass("fromRightSlow").removeClass("delay2s").addClass("toRightHide"),setTimeout(function(){d.css({left:"-26px",backgroundPosition:"-16px 4px",backgroundColor:"rgba(0,0,0,.6)",borderRadius:"15px 0 0 15px"})},800)):(p.removeClass("toRightHide").addClass("fromRightSlow"),d.css({left:"0",backgroundPosition:"10px 4px",backgroundColor:"rgba(0,0,0,0)",borderRadius:"none"}))}),n.append(s),n.append(p),{eletype:e.type,elementout:n,element:s,pageTurn:p,pageTurnTop:p?parseInt(p.css("top")):0,seajsEmitRuned:!1,data:e}},getCookie:function(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0]===e)return o[1]}return""},setCookie:function(e,t,i){if(i){var o=new Date;o.setDate(o.getDate()+i),document.cookie=e+"="+t+";path=/;expires="+o.toGMTString()}else document.cookie=e+"="+t+";path=/"},removeCookie:function(e){this.setCookie(e,1,-1)},createFloat:function(){var e=i("<div></div>");return e.css({width:"100%",height:"100%",margin:0,padding:0,left:0,top:0,position:"absolute",opacity:.69,backgroundColor:"#000",zIndex:1e3}),e}}});
define("page",["jquery","jqueryTransit","eleAnimation","tools"],function(e){function t(e,t){this.zIndex=999-t,this.elearray=[],this.videoarr=[],this.toPage=[],this.checkBox=[],this.data=e,this.bgpic=e.bgpic?e.bgpic:null,this.pageeffect=e.effect?e.effect:"cubedown",this.pan=e.pan?e.pan:"yes",this.init(e)}var a=seajs.data.vars,i=e("jquery"),r=e("tools"),n=e("eleAnimation"),s=i("#arrow");return e("jqueryTransit"),t.prototype={init:function(e){var t=this;this.page=i('<div class="page"> </div>'),this.pagebg=i('<div class="pagebg"></div>'),this.pagecontent=i('<div class="pagecontent"></div>'),this.page.css({"z-index":this.zIndex}),this.pagebg.css({position:"absolute",width:"100%",height:"100%",top:"0",left:"0",overflow:"hidden",backgroundColor:e.bgcolor}),this.bgpic&&(this.bgimg=this.imgfilter(this.bgpic),this.pagebgimg=i('<img  src="'+this.bgimg+'"/>'),this.pagebgimg.css({position:"absolute",opacity:e.opacity,left:t.scale(e.bgpicleft,"left"),top:t.scale(e.bgpictop,"top"),width:e.bgpicwidth?t.scale(e.bgpicwidth,"width"):"100%",height:e.bgpicheight&&"auto"!==e.bgpicheight?t.scale(e.bgpicheight,"height"):"100%","-webkit-filter":"blur("+e.blur+"px)",transform:"rotate("+e.rotate+"deg)","-webkit-transform":"rotate("+e.rotate+"deg)","max-width":"640px"})),this.pagebg.append(this.pagebgimg),this.pagecontent.css(a.radio.contentsize);for(var n in e.content)if(e.content.hasOwnProperty(n)){var s=e.content[n];if(s.index=n,s.left>1200||s.left<-1200)continue;if(s.top>1200||s.top<-1200)continue;var o,c=s.type;switch(c){case"pshape":o=r.renderPshape(s);break;case"ptext":case"text":o=r.renderText(s);break;case"pic":o=r.renderPic(s);break;case"btn":o=r.renderBtn(s);break;case"pButton":o=r.renderPbutton(s);break;case"slide":this.slideCon=s,this.loadSwiper();break;case"eleform":o=r.renderForm(s),this.page.append(o.warn);break;case"charts":this.charts=s,this.loadChart();break;case"video":o=r.renderVideo(s),this.videoarr.push(o.data);break;case"site":a.img360Reg=/(tour\.html)|(img360\.soufunimg\.com)|(aerialPhotoInfo\.htm)|(h5market)/,a.h5market=/(h5market)/,a.img360Reg.test(s.url)&&!a.h5market.test(s.url)&&(this.img360=!0),o=r.renderSite(s,e),this.iframe=!0,this.ele=o;break;case"slides":this.slideCons=s,this.loadSwipers();break;case"rand_button":o=r.renderRandButton(s)}var p=/^(ptext|text|pic|pshape|btn)$/;if(p.test(s.type)&&"click"===s.eventType&&"none"!==s.eventAction){if("changePage"===s.eventAction?t.toPage.push(0|s.toPage):"show"===s.eventAction&&t.checkBox.push(s.checkBox),"object"==typeof s.timer){var h=s.timer.startVal;"timeKeeper"===s.timer.name&&(h=0),h&&t.timeReset(h),a.clock.attr("src",a.imgSite+"imgs/icon-watch.png"),a.h5Timer.css({background:"url("+a.imgSite+"imgs/zfz-ying.png) 22px 4px no-repeat","background-size":"80px 32px"}).show()}t.eleClick(o,s)}o&&(this.elearray.push(o),this.pagecontent.append(o.elementout),o=null)}if(t.checkBox.length)for(var g=0;g<t.checkBox.length;g++)for(var l=0;l<t.checkBox[g].length;l++){var o=t.elearray[t.checkBox[g][l]];o&&(o.initHide=!0)}(e.bgpic||e.bgcolor&&"#ffffff"!==e.bgcolor)&&this.page.append(this.pagebg),e.content.length&&(this.iframe&&this.pagecontent.css("top","0"),this.page.append(this.pagecontent))},imgfilter:function(e){return a.imgUrlReg.test(e)?e:a.imgSite+"imgs/"+e},loadSwiper:function(){var t=this;e.async("swiper",function(e){var a=r.renderPswiper(t.slideCon,e);t.elearray.push(a),t.swiper=a.swiper,t.pagecontent.append(a.elementout),t.swiper.init()})},toDou:function(e){return e=parseInt(e),e<10?"0"+e:""+e},loadSwipers:function(){var t=this;e.async("swiper",function(e){var a=r.renderPswipers(t.slideCons,e);t.swiperPhotos=a.swiper,t.swiperJson=a.swiperJson,t.swiperBox=a.elementout,t.pagecontent.append(a.elementout)})},loadChart:function(){var t=this;e.async(["highcharts","hammer"],function(){var e=r.renderCharts(t.charts);t.chartEle=e,t.elearray.push(e),t.pagecontent.append(e.elementout)})},eleClick:function(t,n){var s=this;t.element.on("click",{ele:t,toPage:n.toPage,toUrl:n.toUrl},function(t){var n=t.data.ele,o=t.data.toPage,c=t.data.toUrl||t.data.url,p=n.data,h=n.imgSrc,g=p.checkBox.length,l=0;switch(p.eventAction){case"magnify":e.async(["photoswipe","photoswipeUI"],function(e,t){var a=i(".pswp")[0],r=[{src:h,w:p.w,h:p.h}],n={history:!1,focus:!1,maxSpreadZoom:3,index:0,showAnimationDuration:0,hideAnimationDuration:0},s=new e(a,t,r,n);s.init()});break;case"hide":for(l=0;l<g;l++)s.elearray[p.checkBox[l]].elementout.fadeOut(500);break;case"show":if(s.data.showFloat&&!s.data.created){s.data.created=!0;var m=r.createFloat();s.pagecontent.append(m)}for(l=0;l<g;l++){var d=s.elearray[p.checkBox[l]];d&&d.elementout.css("z-index","1001").fadeIn(500)}break;case"changePage":var u=a.current;if("object"==typeof p.timer){"number"!=typeof a.timerStartPage&&(a.timerStartPage=u);var f;switch(p.timer.name){case"countDown":if(a.timerStartVal=p.timer.startVal,a.timerToPage=p.timerToPage,a.timerEndPage=p.timerEndPage,f={type:"countDown",startVal:a.timerStartVal,timerToPage:a.timerToPage,timerEndPage:a.timerEndPage},a.timerStartVal>3600){console.warn("设置倒计时超过60min");break}break;case"timeKeeper":a.timerEndPage=p.timerEndPage,f={type:"timeKeeper",timerEndPage:a.timerEndPage}}s.timeUpDown(f)}s.changePage(o);break;case"toUrl":c&&(/http(s?):\/\//.test(c)||(c=location.protocol+"//"+c),window.location.href=c)}})},changePage:function(e){var t=this;if(parseInt(e)===a.current)return!1;var n="matrix3d(1,0,0,0,0,0,1, 0, 0, -1, 0, 0, 0, 368, 368, 1)",o="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)";if(a.pages[a.current].page.fadeOut(500).css("transform",n),a.pages[e].page.show().css("transform",o),a.pages[a.current].hidePageElement(),parseInt(e)===a.pageNum-1||"no"===a.pages[e].pan?s.hide():s.show(),a.timerEndPage&&a.timerEndPage.length&&a.upDownTimer)for(var c=0;c<a.timerEndPage.length;c++)if(parseInt(a.timerEndPage[c])===parseInt(e)){clearTimeout(a.upDownTimer);break}a.pages[e].img360&&a.setMusic("off"),a.pages[e].showPageInAnimation(),a.editorCard.loadPage(a.editorCard.data,e),a.pages[e].charts&&(i(a.pages[e].chartEle.element[0]).html(""),r.render(a.pages[e].charts,i(a.pages[e].chartEle.element[0]))),a.pages[e].swiperJson&&(a.pages[e].swiperTj?a.pages[e].swiperTj.init():a.pages[e].swiperTj=new Swiper(a.pages[e].swiperBox,a.pages[e].swiperJson)),a.current=parseInt(e),a.current===a.timerStartPage&&t.timeReset(a.timerStartVal)},timeReset:function(e,t){var i,r,n=this;e=e||0,i=n.toDou(parseInt(e/60)),r=n.toDou(parseInt(e%60)),a.timeM.html(i),a.timeS.html(r),t||(e<10?a.gameTime.css("color","red"):e<20?a.gameTime.css("color","yellow"):a.gameTime.css("color","white"))},timeUpDown:function(e){var t,i=this,r=e.type,n=e.startVal,s=e.timerToPage;a.upDownTimer=null;var o=function(){i.timeReset(n),n--,clearTimeout(a.upDownTimer),a.upDownTimer=setTimeout(function(){n>=0?o():i.changePage(s)},1e3)},c=function(){t=t||0,i.timeReset(t,"timeKeeper"),t++,clearTimeout(a.upDownTimer),a.upDownTimer=setTimeout(function(){c()},1e3)};"countDown"===r?o():"timeKeeper"===r&&c()},loadelespic:function(e,t){this.bgpic&&t.addpic(this.bgimg);for(var a in this.elearray)this.elearray.hasOwnProperty(a)&&"pic"===this.elearray[a].eletype&&t.addpic(this.elearray[a].imgSrc)},hidePageElement:function(){i.each(this.elearray,function(e,t){"charts"===t.eletype||"slide"===t.eletype||"slides"===t.eletype||"eleform"===t.eletype?t.elementout.hide():n.stopAnimation(t)}),this.hide=!0},showPageInAnimation:function(e){i.each(this.elearray,function(e,t){t.initHide?t.elementout.hide():"charts"===t.eletype||"slide"===t.eletype||"eleform"===t.eletype?t.elementout.fadeIn():"site"===t.eletype?(t.elementout.fadeIn().scrollTop(0),t.pageTurn&&t.pageTurn.css("top",t.pageTurnTop),t.seajsEmitRuned||seajs.emit("showSite")):"slides"===t.eletype?t.eledata.auto&&setTimeout(function(){t.swiper.startAutoplay()},4e3):n.actAnimation(t)}),this.hide=!1,e&&e()},scale:function(e,t){return e=parseInt(Math.round(parseInt(e)*(t?a.radio.ratio[t]:a.radio.scaleRatio))),e+"px"}},t});
define("card",["jquery","page","pageeffect","hammer","tools"],function(e){"use strict";function i(e,i,n,a,s,o){this.data=e,this.containner=i,this.versionData=a,this.viewerIsvip=s,n&&(this.music=n,n.id?this.musicsrc=t.imgUrlReg.test(n.id)?n.id:t.imgSite+"music/"+n.id+".mp3":this.musicsrc=t.imgUrlReg.test(n.name)?n.name:t.imgSite+"webMusic/"+n.name),this.designer=o,this.init(e)}var t=seajs.data.vars,n=e("jquery"),a=e("page"),s=e("tools"),o=e("pageeffect"),r=e("hammer"),h=n("#arrow");return t.arrow=h,i.prototype={ensureCanvas:function(){var e,i,a,s,o={},r=640,h=1008,p=t.screen.width/r,g=t.screen.height/h;o.scaleRatio=p,o.bgScaleRatio=p<g?p:g,g>p?(e=r>t.screen.width?t.screen.width:r,i=e*(h/r),a=r<t.screen.width?(t.screen.width-r)/2:0,s=i<t.screen.height?(t.screen.height-i)/2:0):(i=h>t.screen.height?t.screen.height:h,e=i*(r/h),s=h<t.screen.height?(t.screen.height-h)/2:0,a=e<t.screen.width?(t.screen.width-e)/2:0),o.ratio={height:g,top:g,width:p,left:p},o.contentsize={width:t.screen.width+"px",height:t.screen.height+"px",left:0,top:0,position:"absolute"};var c={width:"100%",height:"100%",left:"0px",top:"0px",position:"relative"};/iphone|ipad|ipod|ios|android|adr|linux;|symbianos|windows phone/i.test(navigator.userAgent)||window.top!==window||(t.isPc=!0,c={width:"414px",height:"736px",position:"relative","box-shadow":"0 10px 50px rgba(0,0,0,.3)"},o.scaleRatio=.646875,o.bgScaleRatio=.646875,o.ratio={height:.646875,top:.646875,width:.646875,left:.646875},o.contentsize={width:"414px",height:"736px",left:0,top:0,position:"absolute"}),n("#main").css(c),t.radio=o},init:function(e){return!("undefined"==typeof e||!e)&&(this.ensureCanvas(),this.pages=[],this.toPageArr=[],this.maxLoadPage=0,this.toLoadPage=2,this.totalPage=e.length-1,t.pageNum=e.length,this.pageLoadStep=3,this.loadPage(e,0),void(t.current=0))},loadPage:function(e,i){if(i=Math.ceil(i/this.pageLoadStep)*this.pageLoadStep,!(i>=t.pageNum)){var n=i+this.pageLoadStep<t.pageNum?i+this.pageLoadStep:t.pageNum;if(n>this.maxLoadPage)for(var s=i;s<n;s++)if(!this.pages[s]||!this.pages[s].loaded){var o=new a(e[s],s);o.loaded=!0,o.toPage.length&&(this.toPageArr=this.toPageArr.concat(o.toPage)),this.pages.push(o),this.containner.append(o.page[0]),o.hidePageElement()}this.maxLoadPage=n-1;var r=Math.max.apply(Math,this.toPageArr);r>0&&(this.toLoadPage=r),this.toLoadPage>this.maxLoadPage&&this.loadPage(e,this.maxLoadPage+1),t.pages=this.pages}},initpanUpAnimations:function(e){var i=this.pages[t.current+1].page[0],n=this.pages[t.current].page[0];this.panUpAnimations=[],this.panUpAnimations.push(o.getLeaveEffect(e.pageeffect,n)),this.panUpAnimations.push(o.getEntryEffect(e.pageeffect,i))},initpanDownAnimations:function(e){e=this.pages[t.current-1];var i=this.pages[t.current].page[0];this.panDownAnimations=[],this.panDownAnimations.push(o.getBackEffect(e.pageeffect,e.page[0])),this.panDownAnimations.push(o.getOutEffect(e.pageeffect,i))},hasNextPage:function(){return!(t.current>=t.pageNum-1)},debouncedCallback:function(e,i){var t=i;return function(){t--,e()}},animateToNextPage:function(e){var i=this.panUpAnimations?this.panUpAnimations.length:1,t=this.debouncedCallback(e,i);for(var n in this.panUpAnimations)this.panUpAnimations.hasOwnProperty(n)&&this.panUpAnimations[n]&&this.panUpAnimations[n].finish(t);this.panUpAnimations=null,this.panDownAnimations=null},animateToPrevPage:function(e){var i=this.panDownAnimations?this.panDownAnimations.length:1,t=this.debouncedCallback(e,i);for(var n in this.panDownAnimations)this.panDownAnimations.hasOwnProperty(n)&&this.panDownAnimations[n]&&this.panDownAnimations[n].finish(t);this.panUpAnimations=null,this.panDownAnimations=null},onPan:function(e){e.preventDefault();var i,n=t.screen.height,a=e.deltaY/n,s=this.pages[t.current+1];s&&(i=s.page);var o,r=this.pages[t.current-1];r&&(o=r.page);var h=this.pages[t.current];if("yes"===h.pan){e.deltaY<0&&!this.panUpAnimations&&this.hasNextPage()&&!e.isFinal?this.initpanUpAnimations(h):e.deltaY>0&&!this.panDownAnimations&&t.current>0&&!e.isFinal&&this.initpanDownAnimations(h),a>1?a=1:-1>a&&(a=-1);var p=e.changedPointers[0].clientX<4||e.changedPointers[0].clientX>t.screen.width-4,g=e.changedPointers[0].clientY<4||e.changedPointers[0].clientY>t.screen.height-4;if(t.isPc||!p&&!g||(this.hammerPages.stop(),e.isFinal=!0),e.isFinal)if(-.2>a||e.velocityY>.5)this.nextpage();else if(0>a){for(var c in this.panUpAnimations)this.panUpAnimations.hasOwnProperty(c)&&this.panUpAnimations[c]&&this.panUpAnimations[c].rollback();this.panUpAnimations=null}else if(a>.2||e.velocityY<-.5)this.prevpage();else{for(var u in this.panDownAnimations)this.panDownAnimations.hasOwnProperty(u)&&this.panDownAnimations[u]&&this.panDownAnimations[u].rollback();this.panDownAnimations=null}else if(0>a&&-.1>a){if(i){s.hide||s.hidePageElement(),i.show();for(var m in this.panUpAnimations)this.panUpAnimations.hasOwnProperty(m)&&this.panUpAnimations[m]&&this.panUpAnimations[m].setValue(-a);for(var d in this.panDownAnimations)this.panDownAnimations.hasOwnProperty(d)&&this.panDownAnimations[d]&&this.panDownAnimations[d].setValue(0)}}else if(a>0&&a>.1&&o){r.hide||r.hidePageElement(),o.show();for(var l in this.panDownAnimations)this.panDownAnimations.hasOwnProperty(l)&&this.panDownAnimations[l]&&this.panDownAnimations[l].setValue(a);for(var f in this.panUpAnimations)this.panUpAnimations.hasOwnProperty(f)&&this.panUpAnimations[f]&&this.panUpAnimations[f].setValue(0)}}},initswipeaction:function(){if("undefined"!=typeof this.containner){var e=this;e.hammerPages=new r.Manager(t.isPc?document.body:e.containner[0]);var i=new r.Pan;i.set({direction:r.DIRECTION_VERTICAL,preventDefault:!0}),e.hammerPages.add(i),e.hammerPages.get("pan").set({direction:r.DIRECTION_VERTICAL}),e.hammerPages.on("pan",function(i){e.onPan(i)})}},start:function(e,i,n){if("undefined"!=typeof this.pages&&this.pages[e]&&("undefined"==typeof i&&(this.pages[e].page.show(),"no"!==this.pages[e].pan&&this.pages[e+1]?h.show():h.hide(),this.pages[e].showPageInAnimation(),this.pages[e].swiperJson&&(this.pages[e].swiperPhotos?this.pages[e].swiperPhotos.init():this.pages[e].swiperPhotos=new Swiper(this.pages[e].swiperBox,this.pages[e].swiperJson)),t.current=e,!this.pages[e-1]&&this.pages[e].iframe&&t.arrow.hide()),"undefined"!=typeof i&&0===i))for(var a in this.pages)this.pages.hasOwnProperty(a)&&this.pages[a].loadelespic(a,n)},nextpage:function(e){var i=this;if(this.hasNextPage()){if(t.timerEndPage&&t.timerEndPage.length&&t.upDownTimer)for(var a=0;a<t.timerEndPage.length;a++)if(parseInt(t.timerEndPage[a])===parseInt(t.current+1)){clearTimeout(t.upDownTimer);break}t.pages[t.current+1].img360&&t.setMusic("off"),!(t.current%this.pageLoadStep)&&t.current+this.pageLoadStep>this.maxLoadPage&&i.loadPage(this.data,t.current+this.pageLoadStep);var o=this.pages[t.current],r=o.page,p=this.pages[t.current+1],g=p.page;t.current===t.pageNum-2||"no"===p.pan||p.iframe?h.hide():h.show();var c=r.find("video"),u=g.find("video");if(this.pages[t.current+1].charts){var m=this.pages[t.current+1].chartEle;m.element.html(""),m.chartHeard.children().eq(0).css({"font-size":"16px",opacity:"1"}).siblings().css({"font-size":"12px",opacity:"0.3"}),setTimeout(function(){i.pages[t.current].chartEle&&s.render(i.pages[t.current].charts,i.pages[t.current].chartEle.element)},500)}if(c.length&&c.each(function(e,i){i.pause(),n(i).next().fadeIn(300)}),u.length)for(var d=this.pages[t.current+1].videoarr,l=d.length,a=0;a<l;a++)d[a].autoplay&&"auto"===d[a].autoplay&&(u[a].currenTime=0,u[a].play(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),u[a].webkitPlaysinline=!0,n(u[a]).next().hide(),d[a].autoplay="false");this.panUpAnimations||this.initpanUpAnimations(o),g.show(),this.animateToNextPage(function(){r.hide(),setTimeout(function(){r.css("transform","")},0),o.hide||o.hidePageElement(),p.showPageInAnimation(),i.panUpAnimations=null,p.swiperJson&&(p.swiperPhotos?p.swiperPhotos.init():p.swiperPhotos=new Swiper(p.swiperBox,p.swiperJson))}),t.current<this.pages.length&&t.current++,e&&e()}},prevpage:function(e){var i=this;if(0===t.current)return!1;var a=this.pages[t.current],o=a.page,r=this.pages[t.current-1],p=r.page;if("no"===r.pan||r.iframe?h.hide():h.show(),this.pages[t.current-1].charts){var g=this.pages[t.current-1].chartEle;g.element.html(""),g.chartHeard.children().eq(0).css({"font-size":"16px",opacity:"1"}).siblings().css({"font-size":"12px",opacity:"0.3"}),setTimeout(function(){i.pages[t.current].chartEle&&s.render(i.pages[t.current].charts,i.pages[t.current].chartEle.element)},500)}var c=o.find("video"),u=p.find("video");if(c.length&&c.each(function(e,i){i.pause(),n(i).next().fadeIn(300)}),u.length)for(var m=this.pages[t.current-1].videoarr,d=m.length,l=0;l<d;l++)m[l].autoplay&&"auto"===m[l].autoplay&&(u[l].play(),u[l].webkitPlaysinline=!0,m[l].autoplay="false",n(u[l]).next().hide());this.panDownAnimations||this.initpanDownAnimations(a),p.show(),this.animateToPrevPage(function(){o.hide(),setTimeout(function(){o.css("transform","")},0),a.hide||a.hidePageElement(),r.showPageInAnimation(),i.panDownAnimations=null,r.swiperJson&&(r.swiperPhotos?r.swiperPhotos.init():r.swiperPhotos=new Swiper(r.swiperBox,r.swiperJson))}),t.current>0&&t.current--,e&&e()},fitscreen:function(e,i){var t=e*n(window).width()/640,a=e*n(window).height()/1010;this.sc=t>a?t:a,this.scale=e;for(var s in this.pages)this.pages.hasOwnProperty(s)&&this.pages[s].fitscreen(e,i);this.initEraser=!0},initEraser:!1},i});
define("preloader",["jquery","card"],function(n){"use strict";function e(){this.queue=[],this.endnum=0,this.curnum=0,this.addingI=0,o.html("0%")}var a=seajs.data.vars,i=n("jquery");n("card");var o=i("#persent"),d=i("#covert"),t=i("#cover"),r=i(".pie1"),u=i(".pie2"),s=i(".wthum"),c=i("#preloadarea"),g=i("#defaultLoading"),m=i("#customLoading");return window.isLoad=!1,a.imgsBox={},a.imgsrcBox={},e.prototype={loadFonts:function(n){var e=n.fontinfo||null,o=[];if(e){e=JSON.parse(e);for(var d="",t=0,r=e.length;t<r;t++)d+='@font-face {font-family: "'+e[t].font+'"; src: url("'+(a.fontMain+e[t].fontmin)+'");}\n',o.push(e[t].font)}var u=i(document.head),s=i("<style></style>"),c=i("#fontPreloader");s.append(d),u.append(s);for(var t=0,g=o.length;t<g;t++)!function(n,e){var a=i("<p>字体预加载</p>");a.css("font-family",o[n]),c.append(a),n===e-1&&c.hide()}(t,g)},addpic:function(n){"undefined"!==n&&(this.queue.push(n),this.endnum++)},loadingType:function(n,e,a){var i=this;if(n=n||"",e=e||"",a=a||"",e)m.show();else if(g.show(),s.removeClass("waitthum infinite").hide(),d.show(),t.fadeIn(),0===a||!i.queue.length||i.addingI>=360)clearInterval(i.loading),o.html("100%"),r.css({rotate:"0deg"}).show(),u.css({rotate:"180deg"}).show(),i.loadend(n);else{var c=parseInt(i.curnum/i.endnum*360)-i.addingI;i.addingI+=c,i.addingI>=360&&(i.addingI=360),i.addingI<=180?(r.css({rotate:i.addingI+"deg"}).show(),u.css({background:"white"}).show()):i.addingI>180&&i.addingI<=360&&(r.css({rotate:"180deg"}).show(),u.css({background:"rgba(175,228,221,1)",rotate:i.addingI+"deg"}).show()),o.html(parseInt(i.addingI/360*100)+"%")}},loadstart:function(n){var e=this;e.editorMakacard=n,clearInterval(e.loading),e.loading=setInterval(function(){e.loadingType(n,a.loadingSrc,e.endnum),e.curnum<e.endnum?(a.imgsBox["img"+e.curnum]=new Image,a.imgsBox["img"+e.curnum].src=e.queue[e.curnum],a.imgsBox["img"+e.curnum].onload=function(){a.imgsrcBox["img"+e.curnum]=a.imgsBox["img"+e.curnum]&&a.imgsBox["img"+e.curnum].src,e.curnum++},a.imgsBox["img"+e.curnum].onerror=function(){alert("图片加载失败。"),clearInterval(e.loading)}):e.curnum>=e.endnum&&(!!a.loadingSrc||e.addingI>=360)&&(clearInterval(e.loading),e.loadend(n))},30)},loadend:function(n){setTimeout(function(){c.fadeOut(),n.start(0),n.initswipeaction(),window.isLoad=!0},500)}},e});
define("pageeffect",["jquery","snabbt"],function(a){"use strict";var o=a("snabbt"),i={getLeaveEffect:function(a,i){var r=null,n=window.innerHeight,t=window.innerWidth;if(a)switch(a){case"cubedown":r=o(i,{transformOrigin:[0,0,n/2],fromRotation:[0,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,rotation:[Math.PI/2,0,0],manual:!0,easing:"linear",duration:500});break;case"toup":r=o(i,{transformOrigin:[0,0,0],fromRotation:[0,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,position:[0,-n,0],manual:!0,easing:"linear",duration:500});break;case"moveup":case"pushup":r=o(i,{transformOrigin:[0,0,0],fromRotation:[0,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,position:[0,-n,0],manual:!0,easing:"linear",duration:500});break;case"flipup":r=o(i,{transformOrigin:[0,0,0],fromRotation:[0,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,rotation:[Math.PI/2,0,0],manual:!0,easing:"linear",duration:500});break;case"news":r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],fromOpacity:1,rotation:[0,0,5*Math.PI],scale:[.6,.6],opacity:0,manual:!0,easing:"ease",duration:700});break;case"scaleup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],rotation:[0,0,0],scale:[.6,.6],opacity:0,manual:!0,easing:"ease",duration:500});break;case"carouup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],position:[0,-n,0],scale:[.6,.6],manual:!0,easing:"ease",duration:500});break;case"fall":r=o(i,{transformOrigin:[-t/2,-n/2,0],fromOpacity:1,fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],position:[0,n,0],rotation:[0,0,-.3],manual:!0,easing:"ease",duration:800});break;default:r=o(i,{position:[0,-n,0],fromPosition:[0,0,0],scale:[1,1],rotation:[0,0,0],manual:!0,easing:"linear",duration:500})}return r},getEntryEffect:function(a,i){var r=null,n=window.innerHeight;if(a)switch(a){case"cubedown":r=o(i,{fromRotation:[-Math.PI/2,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,position:[0,0,0],rotation:[0,0,0],transformOrigin:[0,0,n/2],manual:!0,easing:"linear",duration:500});break;case"toup":r=o(i,{transformOrigin:[0,0,0],fromRotation:[0,0,0],fromPosition:[0,0,0],fromScale:[1,1],fromOpacity:1,position:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"moveup":case"pushup":r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,n,0],position:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"flipup":r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[-Math.PI/2,0,0],fromPosition:[0,0,0],rotation:[0,0,0],manual:!0,easing:"easeIn",duration:500,delay:400});break;case"news":r=o(i,{transformOrigin:[0,0,0],fromOpacity:0,fromScale:[.6,.6],fromRotation:[0,0,5*Math.PI],fromPosition:[0,0,0],rotation:[0,0,0],scale:[1,1],opacity:1,manual:!0,easing:"ease",duration:700,delay:1e3});break;case"scaleup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:0,fromScale:[1.2,1.2],fromRotation:[0,0,0],fromPosition:[0,0,0],rotation:[0,0,0],scale:[1,1],opacity:1,manual:!0,easing:"ease",duration:500});break;case"carouup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[.9,.9],fromRotation:[0,0,0],fromPosition:[0,0,0],position:[0,0,0],scale:[1,1],manual:!0,easing:"ease",duration:500});break;default:r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],fromOpacity:1,scale:[1,1],manual:!0,easing:"easeIn",duration:500})}return r},getOutEffect:function(a,i){var r=null,n=window.innerHeight;if(a)switch(a){case"cubedown":r=o(i,{fromPosition:[0,0,0],scale:[1,1],fromRotation:[0,0,0],rotation:[-Math.PI/2,0,0],transformOrigin:[0,0,n/2],manual:!0,easing:"linear",duration:500});break;case"toup":r=o(i,{position:[0,0,0],fromPosition:[0,0,0],transformOrigin:[0,0,0],fromScale:[1,1],rotation:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"moveup":case"pushup":r=o(i,{position:[0,n,0],fromPosition:[0,0,0],transformOrigin:[0,0,0],fromScale:[1,1],rotation:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"flipup":r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],rotation:[Math.PI/2,0,0],manual:!0,easing:"easeIn",duration:500});break;case"news":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[1,1],fromRotation:[0,0,5*Math.PI],fromPosition:[0,0,0],rotation:[0,0,0],scale:[.6,.6],opacity:0,manual:!0,easing:"ease",duration:700});break;case"scaleup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[1,1],fromRotation:[0,0,0],fromPosition:[0,0,0],rotation:[0,0,0],scale:[1.2,1.2],opacity:0,manual:!0,easing:"ease",duration:500});break;default:r=o(i,{fromPosition:[0,0,0],fromRotation:[0,0,0],position:[0,0,0],scale:[1,1],rotation:[0,0,0],manual:!0,easing:"linear",duration:500})}return r},getBackEffect:function(a,i){var r=null,n=window.innerHeight;if(a)switch(a){case"cubedown":r=o(i,{fromRotation:[Math.PI/2,0,0],fromPosition:[0,0,0],rotation:[0,0,0],transformOrigin:[0,0,n/2],manual:!0,easing:"linear",duration:500});break;case"toup":r=o(i,{position:[0,0,0],fromPosition:[0,-n,0],transformOrigin:[0,0,0],fromScale:[1,1],rotation:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"moveup":case"pushup":r=o(i,{transformOrigin:[0,0,0],fromPosition:[0,-n,0],fromScale:[1,1],fromRotation:[0,0,0],position:[0,0,0],rotation:[0,0,0],manual:!0,easing:"linear",duration:500});break;case"flipup":r=o(i,{transformOrigin:[0,0,0],fromScale:[1,1],fromRotation:[-Math.PI/2,0,0],fromPosition:[0,0,0],rotation:[0,0,0],manual:!0,easing:"easeIn",duration:500,delay:400});break;case"news":r=o(i,{transformOrigin:[0,0,0],fromOpacity:0,fromScale:[.6,.6],fromRotation:[0,0,5*Math.PI],fromPosition:[0,0,0],rotation:[0,0,0],scale:[1,1],opacity:1,manual:!0,easing:"ease",duration:700,delay:1e3});break;case"scaleup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:0,fromScale:[.6,.6],fromRotation:[0,0,0],fromPosition:[0,0,0],rotation:[0,0,0],scale:[1,1],opacity:1,manual:!0,easing:"ease",duration:500});break;case"carouup":r=o(i,{transformOrigin:[0,0,0],fromOpacity:1,fromScale:[.6,.6],fromRotation:[0,0,0],fromPosition:[0,-n,0],position:[0,0,0],scale:[1,1],manual:!0,easing:"linear",duration:500});break;default:r=o(i,{transformOrigin:[0,0,0],fromPosition:[0,-n,0],fromRotation:[0,0,0],fromOpacity:1,fromScale:[1,1],position:[0,0,0],rotation:[0,0,0],scale:[1,1],manual:!0,easing:"linear",duration:800})}return r}};return i});
define("src/preview/main",["jquery","card","preloader","weixinshare"],function(t){"use strict";function e(){this.thum=null,this.viewerPreloader=new o,this.init(),i.setMusic=this.setMusic}var i=seajs.data.vars={},a=t("jquery"),n=t("card"),o=t("preloader");a("input[type=hidden]").each(function(t,e){i[e.id]=e.value}),i.fontMain=location.protocol+"//static.soufunimg.com/font",i.imgUrlReg=/(^(https?:)?\/\/cdn[n|s]\.soufunimg\.com)|((https?:)?\/\/img\w{0,3}\.soufunimg\.com)|(^(https?:)?\/\/\w+\.soufunimg\.com\/h5)/,/https/.test(location.protocol)&&(i.phoneSite=i.phoneSite.replace("http:","https:"));var s=window,r=a("#main"),c=a("#musiccontrolon"),d=a("#musiccontroloff"),u=a("#marketdym"),m=a("body"),h=a("#defaultLoading"),l=a("#customLoading"),p=a("#arrow"),g=a(window);return i.screen={width:r.outerWidth()||g.width(),height:r.outerHeight()||g.height()},i.musicOn=c,i.musicOff=d,i.UA=window.navigator.userAgent.toLowerCase(),i.loadingSrc?l.show():h.show(),i.h5Timer=a("#h5Timer"),i.gameTime=a("#gameTime"),i.timeM=a("#gameMinute"),i.timeS=a("#gameSecond"),i.clock=a("#clock"),e.prototype={constructor:e,init:function(){this.getJson(i.projectID,i.type),!i.isPc&&i.UA.indexOf("test.")>-1&&(t.async(["//static.soufunimg.com/count/loadforwapandm.min.js"]),t.async("//static.soufunimg.com/count/loadonlyga.min.js"))},imgfilter:function(t){return i.imgUrlReg.test(t)?t:i.imgSite+"imgs/"+t},setWXmsg:function(e){this.title=e.data.title,this.thum=e.data.cover?e.data.cover:s.defaultImg,this.status=e.data.status,this.desc=e.data.introduction,this.link=i.phoneSite+i.projectID+"?channel="+i.channel+"&city="+i.city+"&source="+i.source;var n=this.imgfilter(this.thum),o=location.protocol;this.imgUrl=n.indexOf(o)!==-1?n:o+n;var r=t("weixinshare");new r({debug:!1,shareTitle:this.title,descContent:this.desc,lineLink:this.link,imgUrl:this.imgUrl,swapTitle:!1},function(t){var e=t.errMsg,n={c:"web",a:"ajaxWeiXinShareCount",id:i.projectID,type:e.indexOf("sendAppMessage")>-1?"0":"1"};a.ajax({url:i.phoneSite,type:"GET",data:n,dataType:"json",success:function(t){1===t.errcode}})})},getJson:function(t,e){var n=this;a.ajax({type:"get",url:i.phoneSite,cache:!1,data:{c:"api",a:"m"===e?"ajaxMultiTemplateById":"ajaxProject",t:e,id:t},success:function(t){n.getJsonSuccess(t)},error:function(){alert("获取数据失败")}})},getJsonSuccess:function(t){var e=this;if(1!==parseInt(t.errcode))return void alert("获取数据失败!");if("offline"===t.data.status){var o=a('<img style="max-width:100%;max-height:100%;position:relative;z-index:10000;" src="'+i.imgSite+'imgs/offline.jpg">');return m.css("text-align","center").append(o),void r.hide()}if("delete"===t.data.status){var h=a('<img style="max-width:100%;max-height:100%;position:relative;z-index:10000;" src="'+i.imgSite+'imgs/delete.jpg">');return m.css("text-align","center").append(h),void r.hide()}var l=t.data.pdata.json?t.data.pdata.json[0].content:null;if(l){var g=0;a.each(l,function(t,e){var i;e.animations?i=e.animations.animationIn:e.elementAnimations&&(i=e.elementAnimations.animation_in);var a=i.speed+i.delay;g<a&&(g=a)}),s.showTime=g}e.setWXmsg(t),t.data.pdata.json&&1===t.data.pdata.json.length&&p.hide();var f=t.data.pdata.json,w=t.data.pdata.music?t.data.pdata.music:null,v=new n(f,u,w,this.versionData,this.viewerIsvip,this.designer);if(window.editorCard=i.editorCard=v,v.start(0,0,e.viewerPreloader),e.viewerPreloader.loadFonts(t.data),e.viewerPreloader.loadstart(v),v.musicsrc){c.attr("src",i.imgSite+"/imgs/musicon.png").show(),d.attr("src",i.imgSite+"/imgs/musicoff.png").hide();var y=document.getElementById("music");i.audio=y,y.src=v.musicsrc,a(document).one("touchstart",function(){y.play()}),document.addEventListener("WeixinJSBridgeReady",function(){y.play()},!1),w&&w.loop&&"off"===w.loop&&y.removeAttribute("loop"),y.addEventListener("canplaythrough",function(){y.play()},!1),d.on("click",function(){d.hide(),c.show(),y.play()}),c.on("click",function(){d.show(),c.hide(),y.pause()})}else d.hide(),c.hide()},setMusic:function(t){if(i.audio)switch(t){case"on":i.audio.paused&&(i.audio.play(),d.hide(),c.show());break;case"off":i.audio.paused||(i.audio.pause(),d.hide(),c.hide())}}},new e});